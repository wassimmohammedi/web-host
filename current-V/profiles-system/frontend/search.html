<!-- Frontend: search.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Include necessary meta tags, stylesheets, and scripts as per your requirements -->
</head>
<body>
    <div class="container">
        <h2>Search Profiles</h2>
        <form id="searchForm">
            <div class="form-group">
                <label for="searchInput" class="form-label">School Name:</label>
                <input type="text" class="form-control" id="searchInput" placeholder="Enter school name">
            </div>
            <button type="submit" class="btn btn-primary">Search</button>
        </form>
        <div class="search-results" id="searchResults"></div>
    </div>

    <!-- Include Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

    <script>
        document.getElementById('searchForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const searchInput = document.getElementById('searchInput').value;
            
            fetch(`/search-profiles?schoolName=${searchInput}`)
                .then(response => response.json())
                .then(data => {
                    const searchResults = document.getElementById('searchResults');
                    searchResults.innerHTML = ''; // Clear previous results
                    
                    if (data.length === 0) {
                        searchResults.innerHTML = '<p>No profiles found.</p>';
                    } else {
                        data.forEach(profile => {
                            const profileElement = document.createElement('div');
                            profileElement.classList.add('profile');
                            profileElement.innerHTML = `
                            <h3>${profile.schoolName}</h3>
                            <img src="/uploads/${profile.profilePhoto}" alt="Profile Photo" style="height: 80px; width: 80px; border-radius: 50%;">
                                <p>Publication: ${profile.publication}</p>
                                <p>Wilaya: ${profile.wilaya}</p>
                                <p>Comune: ${profile.comune}</p>
                                <p>Level: ${profile.level}</p>
                                <p>Profile Photo:</p>
                            `;
                            searchResults.appendChild(profileElement);
                        });
                    }
                })
                .catch(error => console.error('Error fetching profiles:', error));
        });
    </script>
</body>
</html>
